{% extends "base.html" %}
{% block title %} 音乐管理 - MuaMua {% endblock %}
{% block main %}
{% verbatim %}
<div class="body-content">
    <h1>音乐管理</h1>
    <hr />
    <ul class="nav nav-pills">
        <li class="nav-item">
            <a class="nav-link active" href="#v-pills-music" data-toggle="pill" href="#">歌曲管理</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#v-pills-album" data-toggle="pill" href="#">专辑管理</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#v-pills-artist" data-toggle="pill" href="#">歌手管理</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#v-pills-playlist" data-toggle="pill" href="#">歌单管理</a>
        </li>
    </ul>
    <hr />

    <div class="tab-content" id="v-pills-tabContent">
        <!--歌曲管理-->
        <div class="tab-pane fade show active" id="v-pills-music" role="tabpanel" aria-labelledby="v-pills-music-tab">
            <!--对话框开始-->
            <!-- 添加新歌曲 -->
            <div class="modal fade" id="musicAddModal" tabindex="-1" role="dialog" aria-labelledby="musicAddModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="musicAddModalLabel">添加歌曲</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="music-id-add" class="col-form-label">歌曲Id:</label>
                                    <input ng-model="addMusicId" type="text" class="form-control" id="music-id-add">
                                </div>
                                <div class="form-group">
                                    <label for="music-title-add" class="col-form-label">歌曲标题:</label>
                                    <input ng-model="addMusicTitle" type="text" class="form-control" id="music-title-add">
                                </div>
                                <div class="form-group">
                                    <label for="music-artist-add" class="col-form-label">歌手姓名:</label>
                                    <input ng-model="addMusicArtist" type="text" class="form-control" id="music-artist-add">
                                </div>
                                <div class="form-group">
                                    <label for="music-album-add" class="col-form-label">专辑标题:</label>
                                    <input ng-model="addMusiAlbum" type="text" class="form-control" id="music-album-add">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addMusic();">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--编辑歌曲-->
            <div class="modal fade" id="musicModalEdit" tabindex="-1" role="dialog" aria-labelledby="musicModalEditLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="musicModalEditLabel">编辑歌曲</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="music-id-edit" class="col-form-label">歌曲Id:</label>
                                    <input ng-model="editMusicId" type="text" class="form-control" id="music-id-edit"
                                        disabled>
                                </div>
                                <div class="form-group">
                                    <label for="music-title-edit" class="col-form-label">歌曲标题:</label>
                                    <input ng-model="editMusicTitle" type="text" class="form-control" id="music-title-edit"
                                        disabled>
                                </div>
                                <div class="form-group">
                                    <label for="music-artist-edit" class="col-form-label">歌手姓名:</label>
                                    <input ng-model="editMusicArtist" type="text" class="form-control" id="music-artist-edit"
                                        disabled>
                                </div>
                                <div class="form-group">
                                    <label for="music-album-edit" class="col-form-label">专辑标题:</label>
                                    <input ng-model="editMusicAlbum" type="text" class="form-control" id="music-album-edit"
                                        disabled>
                                </div>
                            </form>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">算了，不改</button>
                            <button type="button" class="btn btn-primary" ng-click="editMusic();" data-dismiss="modal">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--对话框结束-->
            <div class="btn-group" role="group" aria-label="Music Management Toolbar">
                <button type="button" ng-click="refreshMusic();" class="btn btn-secondary">刷新</button>
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#musicAddModal">添加</button>
            </div>
            <hr />
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">歌曲Id</th>
                        <th scope="col">歌曲标题</th>
                        <th scope="col">歌手姓名</th>
                        <th scope="col">专辑标题</th>
                        <th scope="col">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="music in musics">
                        <th scope="row">{{music.id}}</th>
                        <td>{{music.title}}</td>
                        <td>{{music.artist}}</td>
                        <td>{{music.album}}</td>
                        <td><button type="button" class="btn btn-secondary" ng-click="toEditMusic(music.id,music.title,music.artist,music.album)"
                                data-toggle="modal" data-target="#musicModalEdit">编辑</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!--专辑页面-->
        <div class="tab-pane fade" id="v-pills-album" role="tabpanel" aria-labelledby="v-pills-album-tab" ng-controller="AlbumManageController">
            <!--对话框开始-->
            <!-- 添加新专辑 -->
            <div class="modal fade" id="albumAddModal" tabindex="-1" role="dialog" aria-labelledby="albumAddModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="albumAddModalLabel">添加专辑</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="album-title-add" class="col-form-label">专辑标题：</label>
                                    <input ng-model="addAlbumTitle" type="text" class="form-control" id="album-title-add">
                                </div>
                                <div class="form-group">
                                    <label for="album-year-add" class="col-form-label">出版时间:</label>
                                    <input ng-model="addAlbumYear" type="text" placeholder="1970-01-01" class="form-control"
                                        id="album-year-add">
                                </div>
                                <div class="form-group">
                                    <label for="album-publisher-add" class="col-form-label">唱片公司:</label>
                                    <input ng-model="addAlbumPublisher" type="text" class="form-control" id="album-publisher-add">
                                </div>
                                <div class="form-group">
                                    <label for="album-description-add" class="col-form-label">唱片简介:</label>
                                    <textarea ng-model="addAlbumDescription" type="text" class="form-control" id="album-description-add"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="album-track-add" class="col-form-label">歌曲Id:</label>
                                    <input ng-model="addAlbumTracks" type="text" class="form-control" id="album-track-add">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addAlbum();">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 编辑专辑 -->
            <div class="modal fade" id="albumEditModal" tabindex="-1" role="dialog" aria-labelledby="albumEditModalLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="albumEditModalLabel">编辑专辑</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="album-id-edit" class="col-form-label">专辑Id：</label>
                                    <input ng-model="editingAlbum.id" type="text" class="form-control" id="album-id-edit"
                                        disabled>
                                </div>
                                <div class="form-group">
                                    <label for="album-title-edit" class="col-form-label">专辑标题：</label>
                                    <input ng-model="editingAlbum.title" type="text" class="form-control" id="album-title-edit">
                                </div>
                                <div class="form-group">
                                    <label for="album-year-adeditd" class="col-form-label">出版时间:</label>
                                    <input ng-model="editingAlbum.year" type="text" placeholder="1970-01-01" class="form-control"
                                        id="album-year-edit">
                                </div>
                                <div class="form-group">
                                    <label for="album-publisher-edit" class="col-form-label">唱片公司:</label>
                                    <input ng-model="editingAlbum.publisher" type="text" class="form-control" id="album-publisher-edit">
                                </div>
                                <div class="form-group">
                                    <label for="album-description-edit" class="col-form-label">唱片简介:</label>
                                    <textarea ng-model="editingAlbum.description" type="text" class="form-control" id="album-description-edit"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="album-track-edit" class="col-form-label">歌曲Id:</label>
                                    <input ng-model="editingAlbum.rawTracks" type="text" class="form-control" id="album-track-edit">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="editAlbum();">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 删除专辑确认 -->
            <div class="modal fade" id="albumDeleteModal" tabindex="-1" role="dialog" aria-labelledby="albumDeleteModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="albumDeleteModalTitle">删除专辑</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            您确定要删除专辑{{deletingAlbum.title}}？
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-danger" ng-click="deleteAlbum(deletingAlbum.id);"
                                data-dismiss="modal">删除</button>
                        </div>
                    </div>
                </div>
            </div>
            <!--对话框结束-->
            <div class="btn-group" role="group" aria-label="Album Management Toolbar">
                <button type="button" ng-click="refreshAlbums();" class="btn btn-secondary">刷新</button>
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#albumAddModal">添加</button>
            </div>
            <hr />
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">专辑标题</th>
                        <th scope="col">发行日期</th>
                        <th scope="col">简介</th>
                        <th scope="col">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="album in albums">
                        <th>{{album.id}}</th>
                        <td>
                            <div class="dropdown">
                                <a href="#" ng-click="loadAlbumTrack(album.id);" data-toggle="dropdown">{{album.title}}</a>
                                <div class="dropdown-menu">
                                    <h6 class="dropdown-header">{{album.title}}专辑歌曲列表</h6>
                                    <a class="dropdown-item disabled" ng-hide="viewTracksAlbum.tracks.length!=0" href="#">该专辑暂无歌曲</a>
                                    <table class="table" ng-show="viewTracksAlbum.tracks.length!=0">
                                        <thead>
                                            <tr>
                                                <th scope="col">标题</th>
                                                <th scope="col">歌手</th>
                                                <th scope="col">时长</th>
                                                <th scope="col">风格</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="track in viewTracksAlbum.tracks">
                                                <td>{{track.title}}</td>
                                                <td>{{track.artist.join(",")}}</td>
                                                <td>{{track.duration}}</td>
                                                <td>{{track.style}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </td>
                        <td>{{album.year}}</td>
                        <td>{{album.description}}</td>
                        <td>
                            <button type="button" ng-click="setDeleteId(album.id);" data-toggle="modal" data-target="#albumDeleteModal"
                                class="btn btn-danger">删除</button>
                            <button type="button" ng-click="toEditAlbum(album.id);" data-toggle="modal" data-target="#albumEditModal"
                                class="btn btn-info">编辑</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!--歌手页面-->
        <div class="tab-pane fade" id="v-pills-artist" role="tabpanel" aria-labelledby="v-pills-artist-tab"
            ng-controller="ArtistManageController">
            <!-- 对话框开始 -->
            <!-- 歌手添加对话框 -->
            <div class="modal fade" id="artistModalAdd" tabindex="-1" role="dialog" aria-labelledby="artistModalAddLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="artistModalAddLabel">添加歌手</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="artist-name" class="col-form-label">歌手姓名：</label>
                                    <input ng-model="addArtistName" type="text" class="form-control" id="artist-name-add">
                                </div>
                                <div class="form-group">
                                    <label for="artist-country-add" class="col-form-label">国家:</label>
                                    <input ng-model="addArtistCountry" type="text" class="form-control" id="artist-country-add">
                                </div>
                                <div class="form-group">
                                    <label for="artist-birthday-add" class="col-form-label">出生日期:</label>
                                    <input ng-model="addArtistBirth" type="text" placeholder="1970-01-01" class="form-control"
                                        id="artist-birthday-add">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                            <button type="button" ng-click="addArtist();" class="btn btn-primary" data-dismiss="modal">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 歌手编辑对话框 -->
            <div class="modal fade" id="artistModalEdit" tabindex="-1" role="dialog" aria-labelledby="artistModalEditLabel"
                aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="artistModalEditLabel">编辑歌手</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form>
                                <div class="form-group">
                                    <label for="artist-id-edit" class="col-form-label">歌手Id：</label>
                                    <input ng-model="editArtistId" type="text" class="form-control" id="artist-id-edit"
                                        disabled>
                                </div>
                                <div class="form-group">
                                    <label for="artist-name-edit" class="col-form-label">歌手姓名：</label>
                                    <input ng-model="editArtistName" type="text" class="form-control" id="artist-name-edit">
                                </div>
                                <div class="form-group">
                                    <label for="artist-country-edit" class="col-form-label">国家:</label>
                                    <input ng-model="editArtistCountry" type="text" class="form-control" id="artist-country-edit">
                                </div>
                                <div class="form-group">
                                    <label for="artist-birthday-edit" class="col-form-label">出生日期:</label>
                                    <input ng-model="editArtistBirth" type="text" placeholder="1970-01-01" class="form-control"
                                        id="artist-birthday-edit">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
                            <button type="button" ng-click="editArtist();" class="btn btn-primary" data-dismiss="modal">保存</button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 对话框结束 -->
            <div class="btn-group" role="group" aria-label="Artist Management Toolbar">
                <button type="button" ng-click="refreshArtist();" class="btn btn-secondary">刷新</button>
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#artistModalAdd">添加</button>
            </div>
            <hr />
            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">歌手姓名</th>
                        <th scope="col">国家</th>
                        <th scope="col">出生日期</th>
                        <th scope="col">操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="artist in artists">
                        <th scope="row">{{artist.id}}</th>
                        <td>{{artist.name}}</td>
                        <td>{{artist.country}}</td>
                        <td>{{artist.birth}}</td>
                        <td><button type="button" class="btn btn-secondary" ng-click="toEditArtist(artist.id,artist.name,artist.country,artist.birth)"
                                data-toggle="modal" data-target="#artistModalEdit">编辑</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="v-pills-playlist" role="tabpanel" aria-labelledby="v-pills-playlist-tab">d</div>

    </div>
</div>
{% endverbatim %}
{% endblock %}